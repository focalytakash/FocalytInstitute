<% include ./partials/header %>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.jquery.min.js"></script>
  <link href="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.min.js"></script>
  <!-- Flatpickr CSS & Script -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <style>
    .flatpickr-calendar {
      z-index: 99999 !important;
      /* bring on top of everything */
      width: 120px !important;
    }

    .flatpickr-calendar.open {
      display: block !important;
      visibility: visible !important;
    }

    .flatpickr-input[readonly] {
      background-color: #fff !important;
      /* fix greyed out look */
      cursor: pointer;

    }

    numInputWrapper .flatpickr-am-pm {
      width: 40% !important;
    }
  </style>

  <body class="vertical-layout vertical-menu-modern 2-columns  navbar-floating footer-static  " data-open="click"
    data-menu="vertical-menu-modern" data-col="2-columns">
    <div id="preloader"></div>
    <% include ./partials/navbar %>
      <% include ./partials/leftpane%>
        <% include ../../partials/flash %>
          <div class="app-content content">
            <div class="content-overlay"></div>
            <div class="header-navbar-shadow"></div>
            <div class="content-wrapper"></div>
            <form>
              <section id="Concerned-Person ">
                <div class="row">
                  <div class="col-xl-12 px-3 text-right">
                    <a href="<%= process.env.MIPIE_BACKEND_URL %>/company/list/jobs" class="btn btn-outline-primary">All Job Details</a>
                  </div>
                  <div class="col-xl-12 col-lg-12 px-3">
                    <div class="card mt-2">
                      <div class="card-header border border-top-0 border-left-0 border-right-0">
                        <h4 class="card-title pb-1">Add Job Description</h4>
                      </div>
                      <div class="card-content" id="jd-info">
                        <div class="card-content">
                          <div class="card-body">
                            <div class="row">
                              <div class="col-xl-3 mb-1" id="jd-organizationName">
                                <label>Display Organization Name</label><span class="mandatory"> *</span>
                                <input class="form-control" id="organizationName" type="text" name="displayCompanyName"
                                  value="<%= company?.name %>" required="required" placeholder="Company Name"
                                  oninvalid="this.setCustomValidity('Enter Company Name Here')"
                                  onkeypress="if(this.value.length==50) return false"
                                  oninput="this.setCustomValidity('')" />
                              </div>
                              <div class="col-xl-3 mb-1" id="jd-title">
                                <label>Title</label><span class="mandatory"> *</span>
                                <input class="form-control" id="jobTitle" type="text" name="title"
                                  value="<%= vacancy?.title %>" required="required"
                                  oninvalid="this.setCustomValidity('Enter Title Here')"
                                  placeholder="Enter the job title" oninput="this.setCustomValidity('')"
                                  maxlength="100" />
                              </div>
                              <!-- <div class="col-xl-2 mb-1">
                                <label>Cut Price</label>
                                <input class="form-control" id="cutprice" type="number">
                              </div>   -->

                              <div class="col-xl-3 mb-1" id="jd-industry-field">
                                <label>Industry</label><span class="mandatory"> *</span>
                                <select class="form-control" value="" id="jd-industry" name="_industry" required
                                  oninvalid="this.setCustomValidity('Please Select Industry')"
                                  oninput="this.setCustomValidity('')">
                                  <option value="">Select option</option>
                                  <% industry.forEach((item)=>{%>
                                    <% if(vacancy?._industry?.toString()==item._id.toString()) { %>
                                      <option value="<%= item._id %>" class="text-capitalize" selected>
                                        <%= item.name %>
                                      </option>
                                      <% } else { %>
                                        <option value="<%=item._id %>" class="text-capitalize">
                                          <%= item.name %>
                                        </option>
                                        <% } %>
                                          <% }); %>
                                </select>
                              </div>
                              <!-- <div class="col-xl-3 mb-1 d-none" id="jd-category-field">
                                <label>Job Type</label><span class="mandatory"> *</span>
                                <select class="form-control text-capitalize " value="" id="jd-category"
                                  name="_jobCategory" required
                                  oninvalid="this.setCustomValidity('Please Select JobCategory')"
                                  oninput="this.setCustomValidity('')">
                                  <option value="">Select option</option>
                                  <% jobCategory.forEach((item)=>{%>
                                    <% if(vacancy?._jobCategory?.toString()==item._id.toString()) { %>
                                      <option value="<%= item._id %>" class="text-capitalize" selected>
                                        <%= item.name %>
                                      </option>
                                      <% } else { %>
                                        <option value="<%=item._id %>" class="text-capitalize">
                                          <%= item.name %>
                                        </option>
                                        <% } %>
                                          <% }); %>
                                </select>
                              </div> -->
                              <div class="col-xl-3 mb-1  " id="jd-exp-field">
                                <label>Experience (In Years)</label><span class="mandatory"> *</span>
                                <select class="form-control" id="jd-exp" name="experience" value="" required
                                  oninvalid="this.setCustomValidity('Please Select Experience')"
                                  oninput="this.setCustomValidity('')">
                                  <option value="">Select option</option>
                                  <% if(vacancy?.experience) { %>
                                    <option value="<%= vacancy?.experience %>" class="text-capitalize" selected>
                                      <%= vacancy?.experience %>
                                    </option>
                                    <%}%>
                                      <option value="0" <% if(vacancy?.experience=='0' ) {%> selected <% } %> >0
                                      </option>
                                      <% for (var i=1; i <=25; i++ ) { %>
                                        <option value="<%= i %>">
                                          <%= i %> 
                                        </option>
                                        <% } %>
                                </select>
                              </div>
                              <div class="col-xl-3 mb-1  " id="jd-exp-field-month">
                                <label>Experience (In Months)</label><span class="mandatory"> *</span>
                                <select class="form-control" id="jd-exp-mon" name="experienceMonths" value="" required
                                  oninvalid="this.setCustomValidity('Please Select Experience')"
                                  oninput="this.setCustomValidity('')">
                                  <option value="">Select option</option>
                                  <% if(vacancy?.experienceMonths) { %>
                                    <option value="<%= vacancy?.experienceMonths %>" class="text-capitalize" selected>
                                      <%= vacancy?.experienceMonths %>
                                    </option>
                                    <%}%>
                                      <option value="0" <% if(vacancy?.experienceMonths=='0' ) {%> selected <% } %> >0
                                      </option>
                                      <% for (var i=1; i <=12; i++ ) { %>
                                        <option value="<%= i %>">
                                          <%= i %>
                                        </option>
                                        <% } %>
                                </select>
                              </div>

                              <div class="col-xl-3 mb-1" id="jd-qua-field">
                                <label>Qualification</label><span class="mandatory"> *</span>
                                <select class="form-control" name="_qualification" value="" required id="jd-qua"
                                  oninvalid="this.setCustomValidity('Please Select Qualification')"
                                  oninput="this.setCustomValidity('')">
                                  <option value="">Select option</option>
                                  <% qualification.forEach((item)=>{%>
                                    <% if(vacancy?. _qualification?.toString()==item._id.toString()) { %>
                                      <option value="<%= item._id %>" class="text-capitalize" selected>
                                        <%= item.name %>
                                      </option>
                                      <% } else { %>
                                        <option value="<%=item._id %>" class="text-capitalize">
                                          <%= item.name %>
                                        </option>
                                        <% } %>
                                          <% }); %>
                                </select>
                              </div>
                              <div class="col-xl-3 mb-1" id="jd-subqua-field">
                                <label>Stream</label><span class="mandatory"> *</span>
                                <select class="form-control chosen" multiple name="_subQualification" value="" required
                                  id="jd-subqua" oninvalid="this.setCustomValidity('Please Select Sub Qualification')"
                                  oninput="this.setCustomValidity('')">
                                  <% subQualification.forEach((item)=>{%>
                                    <% if(vacancy?._subQualification?.includes(item._id)) { %>
                                      <option value="<%= item._id %>" class="text-capitalize" selected>
                                        <%= item.name %>
                                      </option>
                                      <% } else { %>
                                        <option value="<%=item._id %>" class="text-capitalize">
                                          <%= item.name %>
                                        </option>
                                        <% } %>
                                          <% }); %>
                                </select>
                              </div>
                              <div class="col-xl-3 mb-1" id="sub-qua-field">
                                <label>Stream</label><span class="mandatory"> *</span>
                                <input type="text" class="form-control" placeholder="Enter your subQualification"
                                  disabled name="_subQualification" value="">
                              </div>
                              <input type="hidden" value="<%= vacancy?.isEdit %>" name="isEdit" id="isedited">
                              <div class="col-xl-3 mb-1" id="jd-validity-field">
                                <label>Active Till
                                  <span class="asterisk">*</span>
                                  <input type="date" class="form-control" required name="validity" id="endDate"
                                    min="<%= vacancy?.validity ? moment(vacancy?.validity).utcOffset('+05:30').format('YYYY-MM-DD') : moment().utcOffset('+05:30').format('YYYY-MM-DD') %>"
                                    value="<%= vacancy?.validity ? moment(vacancy?.validity).utcOffset('+05:30').format('YYYY-MM-DD') : '' %>" />
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row" id="jd-loc">
                  <div class="col-xl-12 col-lg-12 px-3">
                    <div class="card mt-1">
                      <div class="card-content">
                        <div class="card-content">
                          <div class="card-body">
                            <div class="row">
                              <div class="col-xl-4 mb-1" id="jd-state">
                                <label>State</label><span class="mandatory"> *</span>
                                <select class="form-control" name="state" value="" id="state-field"
                                  onchange="stateDropDown(event,'city')">
                                  <option value="">Select option</option>
                                  <% state.forEach((item)=>{%>
                                    <% if(vacancy?.state.toString()==item._id.toString()) { %>
                                      <option value="<%= item._id %>" class="text-capitalize" selected>
                                        <%= item.name %>
                                      </option>
                                      <% } else { %>
                                        <option value="<%=item._id %>" class="text-capitalize">
                                          <%= item.name %>
                                        </option>
                                        <% } %>
                                          <% }); %>
                                </select>
                              </div>
                              <div class="col-xl-4 mb-1" id="jd-city">
                                <label>City</label><span class="mandatory"> *</span>
                                <select class="form-control" name="city" id="city" value="">
                                  <option value="">Select option</option>
                                  <% if(vacancy?.state?._id) {%>
                                    <% city?.forEach((item)=>{%>
                                      <% if(vacancy?.city.toString()==item._id.toString()) { %>
                                        <option value="<%= item._id %>" class="text-capitalize" selected>
                                          <%= item.name %>
                                        </option>
                                        <%} else { %>
                                          <option value="<%= item._id %>" class="text-capitalize candidatecitylist">
                                            <%= item.name %>
                                          </option>
                                          <% } }); }%>
                                </select>
                              </div>
                              <div class="col-xl-4" id="loc-field">
                                <label for="work-loc">Work Location<span class="mandatory"> *</span>
                                  <div class="input-group mb-2">
                                    <div class="input-group-prepend bg-locat">
                                      <div class="input-group-text bg-intext"><img src="<%= process.env.MIPIE_BACKEND_URL %>/images/isist.png"
                                          id="siteforcomp">
                                      </div>
                                    </div>
                                    <input type="text" class="form-control" id="work-loc" value="<%= vacancy?.place %>">
                                    <input type="hidden" id="place" name="place" value="<%= vacancy?.place %>"
                                      class="form-control" />
                                    <input type="hidden" id="latitude" name="latitude" value="<%= vacancy?.latitude %>"
                                      class="form-control" />
                                    <input type="hidden" id="longitude" name="longitude"
                                      value="<%= vacancy?.longitude %>" class="form-control" />
                                  </div>
                              </div>
                              <div class="col-xl-4 mb-1">
                                <label for="noOfVacancies">Number of Vacancies</label>
                                <input id="noOfVacancies" class="form-control" type="number" name="noOfPosition"
                                  onkeypress="if(this.value.length==4) return false"
                                  value="<%= vacancy?.noOfPosition %>" maxlength="3" />
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row" id="jd-comp">
                  <div class="col-xl-12 col-lg-12 px-3">
                    <div class="card mt-1">
                      <div class="card-content">
                        <div class="card-content">
                          <div class="card-body">
                            <div class="row">

                              <div class="col-xl-3 mb-1" id="gender-preference">
                                <div class="demo-inline-spacing" id="gender-preference-div">
                                  <label>Gender Preferences</label><span class="mandatory"> *</span>
                                  <br>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="genderPreference"
                                      id="genderRadio1" value="male" <% if(vacancy?.genderPreference==='male' ) {%>
                                    checked <% } %> />
                                      <label class="form-check-label" for="genderRadio1">Male</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="genderPreference"
                                      id="genderRadio2" value="female" <% if(vacancy?.genderPreference==='female' ) {%>
                                    checked <% } %> />
                                      <label class="form-check-label" for="genderRadio2">Female</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="genderPreference"
                                      id="genderRadio3" value="no preference" <%
                                      if(vacancy?.genderPreference==='no preference' || !vacancy?.genderPreference) {%>
                                    checked <% } %> />
                                      <label class="form-check-label" for="genderRadio3">No Preference</label>
                                  </div>
                                </div>
                              </div>
                              <div class="col-xl-3 mb-1" id="job-type-field">
                                <div class="demo-inline-spacing" id="type-div">
                                  <label>Type</label><span class="mandatory"> *</span>
                                  <br>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="jobType" id="inlineRadio1"
                                      value="Full Time" <% if(vacancy?.jobType==='Full Time' ) {%> checked <% } %> />
                                      <label class="form-check-label" for="inlineRadio1">Full Time</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="jobType" id="inlineRadio2"
                                      value="Part Time" <% if(vacancy?.jobType==='Part Time' ) {%> checked <% } %> />
                                      <label class="form-check-label" for="inlineRadio2">Part Time</label>
                                  </div>
                                </div>
                              </div>
                              <div class="col-xl-3 mb-1" id="jp-comp-field">
                                <div class="demo-inline-spacing">
                                  <label>Compensation</label><span class="mandatory"> *</span>
                                  <br>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="compensation" id="inlineRadio3"
                                      value="Fixed" <% if(vacancy?.compensation==='Fixed' ) {%> checked <% } %>/>
                                      <label class="form-check-label" for="inlineRadio3">Fixed</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="compensation" id="inlineRadio4"
                                      value="Incentive Only" <% if(vacancy?.compensation==='Incentive Only' ) {%>
                                    checked
                                    <% } %>/>
                                      <label class="form-check-label" for="inlineRadio4">Incentive Only</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="compensation" id="inlineRadio5"
                                      value="Fixed + Incentive" <% if(vacancy?.compensation==='Fixed + Incentive' ) {%>
                                    checked <% } %>/>
                                      <label class="form-check-label" for="inlineRadio5">Fixed + Incentive</label>
                                  </div>
                                </div>
                              </div>
                              <div class="col-xl-3 mb-1" id="jd-pay-field">
                                <div class="demo-inline-spacing">
                                  <label>Pay</label><span class="mandatory"> *</span>
                                  <br>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="pay" id="inlineRadio6"
                                      value="On Payrol" <% if(vacancy?.pay==='On Payrol' ) {%> checked <% } %>/>
                                      <label class="form-check-label" for="inlineRadio6">On Payrol</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="pay" id="inlineRadio7"
                                      value="Freelancer/Consultant" <% if(vacancy?.pay==='Freelancer/Consultant' ) {%>
                                    checked <% } %>/>
                                      <label class="form-check-label" for="inlineRadio7">Freelancer/Consultant</label>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-xl-6 mb-1" id="age-group">
                                <label>Age Group</label>
                                <div class="row">

                                  <div class="col-6"><label class="label-font">From</label>
                                    <input type="range" min="18" max="70" value="<%=vacancy?.ageMin||18%>" name="ageMin"
                                      id="min-age" oninput="displayVal(event,'val-min-age')">
                                    <p>Age: <span id="val-min-age">
                                        <%=vacancy?.ageMin||18%>
                                      </span></p>
                                  </div>
                                  <div class="col-6"><label class="label-font">To</label>
                                    <input type="range" min="18" max="70" value="<%=vacancy?.ageMax||70%>" name="ageMax"
                                      id="max-age" oninput="displayVal(event,'val-max-age')">
                                    <p>Age: <span id="val-max-age">
                                        <%=vacancy?.ageMax||70%>
                                      </span></p>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row" id="jd-shift-info">
                  <div class="col-xl-12 col-lg-12 px-3">
                    <div class="card mt-1">
                      <div class="card-content">
                        <div class="card-content">
                          <div class="card-body">
                            <div class="row">
                              <div class="col-xl-3 mb-1" id="shift-field">
                                <div class="demo-inline-spacing">
                                  <label>Shift </label><span class="mandatory"> *</span>
                                  <br>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="shift" id="inlineRadio8"
                                      value="Day Shift" <% if(vacancy?.shift==='Day Shift' ) {%> checked <% } %>/>
                                      <label class="form-check-label" for="inlineRadio8">Day Shift</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="shift" id="inlineRadio9"
                                      value="Night Shift" <% if(vacancy?.shift==='Night Shift' ) {%> checked <% } %>/>
                                      <label class="form-check-label" for="inlineRadio9">Night Shift</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="shift" id="rotational"
                                      value="Rotational" <% if(vacancy?.shift==='Rotational' ) {%> checked <% } %>/>
                                      <label class="form-check-label" for="rotational">Rotational</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="shift" id="inlineRadio10"
                                      value="NA" <% if(vacancy?.shift==='NA' ) {%> checked <% } %>/>
                                      <label class="form-check-label" for="inlineRadio10">NA</label>
                                  </div>
                                </div>
                              </div>
                              <!-- <div class="col-xl-2 mb-1">
                                <label for="timings">Shift Timings</label>
                                <input id="timings" class="form-control" type="text" name="shifttimings"
                                  value="<%= vacancy?.shifttimings %>" maxlength="3" />
                              </div> -->
                              <div class="col-xl-3 mb-1">
                                <label>Shift Timing
                                  <span class="mandatory">*</span>
                                </label>

                                <div id="shiftTiming">
                                  <!-- <label>&nbsp;</label> -->
                                  <div class="row">
                                    <div class="col-6">
                                      <label>From</label>
                                      <input name="shiftTimingFrom" type="text" id="timing-from" class="form-control"
                                        placeholder="From">
                                    </div>
                                    <div class="col-6">
                                      <label>To</label>
                                      <input name="shiftTimingTo" type="text" id="timing-to" class="form-control"
                                        placeholder="To">
                                    </div>
                                  </div>

                                </div>
                              </div>
                              <div class="col-xl-3 mb-1" id="jd-work-field">
                                <div class="demo-inline-spacing">
                                  <label>Work Type</label><span class="mandatory"> *</span>
                                  <br>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="work" id="inlineRadio11"
                                      value="Work from office" <% if(vacancy?.work==='Work from office' ) {%> checked <%
                                      } %>/>
                                      <label class="form-check-label" for="inlineRadio11">Work from office</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="work" id="wfh"
                                      value="Work from home" <% if(vacancy?.work==='Work from home' ) {%> checked <% }
                                      %>/>
                                      <label class="form-check-label" for="wfh">Work from home</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="work" id="inlineRadio12"
                                      value="Field" <% if(vacancy?.work==='Field' ) {%> checked <% } %>/>
                                      <label class="form-check-label" for="inlineRadio12">Field</label>
                                  </div>
                                  <div class="form-check form-check-inline">
                                    <input class="form-check-input" type="radio" name="work" id="inlineRadio13"
                                      value="NA" <% if(vacancy?.work==='NA' ) {%> checked <% } %>/>
                                      <label class="form-check-label" for="inlineRadio13">NA</label>
                                  </div>
                                </div>
                              </div>
                              <div class="col-xl-3 mb-1">
                                <label>Additional Benifits</label>
                                <select class="form-control chosen" multiple name="benifits" id="additional-benifits"
                                  data-placeholder="Select Additional Benifits">
                                  <% if(vacancy?.benifits.length>0 ) {%>
                                    <% vacancy?.benifits.forEach((i)=>{%>
                                      <option value="<%= i %>" selected>
                                        <%= i %>
                                      </option>
                                      <%})%>
                                        <%}%>
                                          <option value="Health Insurance">Health Insurance</option>
                                          <option value="Overtime">Overtime</option>
                                          <option value="Food + Accomodation">Food + Accomodation</option>
                                          <option value="Accomodation">Accomodation</option>
                                          <option value="Food">Food</option>
                                          <option value="Transport">Transport</option>
                                          <option value="PF">PF</option>
                                          <option value="PF">ESI</option>
                                          <option value="Joining Bonus">Joining Bonus</option>
                                          <option value="Fuel Allowance">Fuel Allowance</option>
                                          <option value="Travel Allowance">Travel Allowance</option>
                                          <option value="Laptop">Laptop</option>
                                          <option value="Mobile">Mobile</option>
                                          <option value="Others">Others</option>
                                </select>
                              </div>

                              <div class="col-xl-3">
                                <label for="remarks">Remarks</label>
                                <textarea id="remarks" name="remarks" class="form-control" cols="3" rows="3"
                                  maxlength="150"><%= vacancy?.remarks %></textarea>
                              </div>

                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row" id="jd-skills">
                  <div class="col-xl-12 col-lg-12 px-3">
                    <div class="card mt-1">
                      <div class="card-content">
                        <div class="card-content">
                          <div class="card-body">
                            <div class="row">
                              <div class="col-xl-3 mb-1">
                                <label>Payout</label>
                                <select id="payout" class="form-control" name="payOut">
                                  <option value="">Select option</option>
                                  <option value="Daily" <% if(vacancy?.payOut==='Daily' ) {%> selected <% } %>>Daily
                                  </option>
                                  <option value="Weekly" <% if(vacancy?.payOut==='Weekly' ) {%> selected <% } %>>Weekly
                                  </option>
                                  <option value="Monthly" <% if(vacancy?.payOut==='Monthly' ) {%> selected <% } %>
                                      >Monthly
                                  </option>
                                  <option value="NA" <% if(vacancy?.payOut==='NA' ) {%> selected <% } %>>NA</option>
                                </select>
                              </div>
                              <!-- <div class="col-xl-3 mb-1">
                                <label for="techSkills">Tech Skills Required</label>
                                <select id="techSkills" class="form-control chosen" multiple name="_techSkills"
                                  data-placeholder="Select Technical Skills">
                                  <% techskills.forEach((item)=> { %>
                                    <% if(vacancy?._techSkills?.includes(item._id)) { %>
                                      <option value="<%= item._id %>" class="text-capitalize" selected>
                                        <%= item.name %>
                                      </option>
                                      <% } else { %>
                                        <option value="<%= item._id %>" class="text-capitalize">
                                          <%= item.name %>
                                        </option>
                                        <% } %>
                                          <% }); %>
                                </select>
                              </div> -->

                              <!-- <div class="col-xl-3 mb-1">
                                <label for="nonTechSkills">Non Tech Skills Required</label>
                                <select id="nonTechSkills" class="form-control chosen" multiple name="_nonTechSkills"
                                  data-placeholder="Select Non-Technical Skills">
                                  <% nontechskills.forEach((item)=> { %>
                                    <% if(vacancy?._nonTechSkills?.includes(item._id)) { %>
                                      <option value="<%= item._id %>" class="text-capitalize" selected>
                                        <%= item.name %>
                                      </option>
                                      <% } else { %>
                                        <option value="<%= item._id %>" class="text-capitalize">
                                          <%= item.name %>
                                        </option>
                                        <% } %>
                                          <% }); %>
                                </select>
                              </div> -->

                              <div class="col-xl-3 mb-1">
                                <label>Requirement (If any)</label>
                                <select class="form-control" name="requirement" id="requirement-feild">
                                  <option value="">Select option</option>
                                  <option value="Two Wheeler" <% if(vacancy?.requirement==='Two Wheeler' ) {%> selected
                                    <% } %>>Two Wheeler
                                  </option>
                                  <option value="Four Wheeler" <% if(vacancy?.requirement==='Four Wheeler' ) {%>
                                    selected
                                    <% } %>>Four Wheeler
                                  </option>
                                  <option value="Driving License" <% if(vacancy?.requirement==='Driving License' ) {%>
                                    selected <% } %>>
                                      Driving License
                                  </option>
                                  <option value="Passport" <% if(vacancy?.payOut==='Passport' ) {%> selected <% } %>
                                      >Passport</option>
                                </select>
                              </div>
                              <div class="col-xl-3 mb-1 fixed" id="salaryRange-field" name="salaryRange">
                                <label>Salary Range (Monthly in Rs.)</label><span class="mandatory"> *</span>
                                <br />
                                <div class="form-check form-check-inline">
                                  <input class="form-check-input" type="radio" name="isFixed" value="true"
                                    onclick="javascript:salaryCheck();" id="fixedCheck" <% if(vacancy?.isFixed==true )
                                    {%>
                                  checked <% } %>/>
                                    <label class="form-check-label" for="inlineRadio88">Fixed</label>
                                </div>
                                <div class="form-check form-check-inline">
                                  <input class="form-check-input" type="radio" value="false"
                                    onclick="javascript:salaryCheck();" name="isFixed" id="defineCheck" <%
                                    if(vacancy?.isFixed==false ) {%> checked <% } %>/>
                                    <label class="form-check-label" for="inlineRadio99">Define Range</label>
                                </div>
                                <div id="ifFixed" <% if(vacancy?.isFixed!=true ) {%> style="display:none;" <% } %>>
                                    <input class="form-control" placeholder="Fixed amount" type="number" name="amount"
                                      onKeyPress="if(this.value.length==10) return false;" id="fixed-range-input"
                                      value="<%= vacancy?.amount%>">
                                </div>
                                <div id="ifdefine" <% if(vacancy?.isFixed!=false ) {%>
                                  style="display:none;" <% } %>>
                                    <label>&nbsp;</label>
                                    <div class="row">
                                      <div class="col-6"> <input class="form-control" placeholder="Minimum"
                                          type="number" name="min" onKeyPress="if(this.value.length==10) return false;"
                                          id="min-input" value="<%= vacancy?.min%>" /></div>
                                      <div class="col-6"><input class="form-control" placeholder="Maximum" type="number"
                                          name="max" onKeyPress="if(this.value.length==10) return false;" id="max-input"
                                          value="<%= vacancy?.max%>" /></div>
                                    </div>


                                </div>
                              </div>

                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-xl-12 col-lg-12 px-3">
                    <div class="card">
                      <div class="card-content">
                        <div class="card-content">
                          <div class="card-body">
                            <div class="row">
                              <label for="job-public" class="px-1 h1 col-6">Do you want this job to be visible to the public?</label>
                              <div class="col-xl-12 col-lg-12 col-12">
                                <div class="form-check-inline">
                                  <input type="radio" id="job-public-yes" name="isPublic" value="true"
                                    <% if(vacancy?.postingType==='Public' || !vacancy?.postingType) {%> checked <% } %>/>
                                    <label for="job-public-yes">Yes</label>
                                </div>
                                <div class="form-check-inline">
                                  <input type="radio" id="job-public-no" name="isPublic" value="false"
                                    <% if(vacancy?.postingType==='Private') {%> checked <% } %>/>
                                    <label for="job-public-no">No</label>
                                </div>
                              </div>
                              <div class="col-12" id="college-ac-info" style="display: none;">
                                <div class="row">
                                  <div class="col-xl-8 col-lg-10 mb-1">
                                    <label>College Account Numbers</label><span class="mandatory"> *</span>
                                    <small class="form-text text-muted d-block mb-2">
                                      <i class="feather icon-info"></i> 
                                      Enter College Account Numbers. This job will be visible to the specified colleges. You can add multiple colleges.
                                    </small>
                                    <div id="college-ac-list" class="row">
                                      <!-- College Account Numbers will be added here dynamically -->
                                    </div>
                                    <button type="button" class="btn btn-sm btn-success mt-2" onclick="addCollegeAcNo()">
                                      <i class="feather icon-plus"></i> Add College Account Number
                                    </button>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="row">
                  <div class="col-xl-12 col-lg-12 px-3">
                    <div class="card">
                      <div class="card-content">
                        <div class="card-content">
                          <div class="card-body">
                            <div class="row">
                              <label for="contact-directly" class="px-1 h1 col-6">Do you want the candidate to contact
                                you
                                directly?</label>
                              <label for="25 coin" style="display: none;" class="col-6 text-center">This is service
                                premium we will deduct <%=coinsRequired?.contactcoins %> coins
                                  from your account</label>
                              <div class="col-xl-12 col-lg-12 col-12">
                                <div class="form-check-inline">
                                  <input type="radio" id="contact-directly-yes" name="isContact" value="true"
                                    onclick="showContactInfo()" <% if(vacancy?.isContact==true ) {%> checked <% } %>/>
                                    <label for="contact-directly-yes">Yes</label>
                                </div>
                                <div class="form-check-inline">
                                  <input type="radio" id="contact-directly-no" name="isContact" value="false"
                                    onclick="hideContactInfo()" <% if(vacancy?.isContact==false ) {%> checked <% } %>/>
                                    <label for="contact-directly-no">No</label>
                                </div>
                              </div>
                              <div class="col-12" id="contact-info" style="display: none;">
                                <div class="row">
                                  <div class="col-xl-3 mb-1" id="jd-name">
                                    <label>Name</label><span class="mandatory"> </label>
                                      <input type="text" class="form-control"
                                        onkeypress="return (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123) || event.charCode == 32 || event.charCode == 8;"
                                        name="nameof" id="name" placeholder="Name" value="<%= vacancy?.nameof %>">
                                  </div>
                                  <div class="col-xl-3 mb-1" id="jd-phoneNumber">
                                    <label>PhoneNumber</label><span class="mandatory"> *</span>
                                    <input type="tel" class="form-control" id="phoneNumber"
                                      pattern="[+]?[0-9]{1,3}\s?\d{9,12}" value="<%= vacancy?.phoneNumberof %>"
                                      placeholder="Phone no" name="phoneNumberof"
                                      onkeypress="return event.charCode >= 48 && event.charCode <= 57" maxlength="10">
                                  </div>
                                  <div class="col-xl-3 mb-1 " id="jd-whatsappNumber">
                                    <label>Whatsapp Number</label><span class="mandatory"></label>
                                      <input type="tel" class="form-control" id="whatsappNumber"
                                        pattern="[+]?[0-9]{1,3}\s?\d{9,12}" value="<%= vacancy?.whatsappNumberof %>"
                                        placeholder="Whatsapp Number" name="whatsappNumberof"
                                        onkeypress="return event.charCode >= 48 && event.charCode <= 57" maxlength="10">
                                  </div>
                                  <div class="col-xl-3 mb-1" id="jd-email">
                                    <label>Email</label><span class="mandatory"></label>
                                      <input class="form-control" type="email" name="emailof"
                                        placeholder="Enter your email" id="email" value="<%= vacancy?.emailof %>">
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <section id="questionanswerTemplate">
                  <template>
                    <div class="row questionanswerrow">
                      <div class="col-xl-6 mb-1">
                        <label>Question</label>
                        <textarea name="Question" class="form-control" col="50" rows="1"></textarea>
                      </div>
                      <div class="col-xl-6 mb-1">
                        <label>Answer</label>
                        <textarea name="Answer" class="form-control" col="50" rows="1"></textarea>
                      </div>
                  </template>
                </section>
                <div class="row">
                  <div class="col-xl-6 col-lg-6 px-3">
                    <div class="card mt-1">
                      <div class="card-content">
                        <div class="card-body">
                          <div class="qs_list">
                            <div class="row questionanswerrow">
                              <div class="col-xl-6">
                                <label>Question</label>
                                <textarea name="question" class="form-control question" cols="50"
                                  rows="1">Do you offer a safe working environment?</textarea>
                              </div>
                              <div class="col-xl-6">
                                <label>Answer</label>
                                <textarea name="answer" class="form-control answer" cols="50"
                                  rows="1">Do you offer a safe working environment?</textarea>
                              </div>
                              <div class="col-xl-12 mb-1 text-right ">
                                <a class="btn btn-success text-white add-button">+ Add Another</a>
                              </div>
                            </div>

                          </div>
                        </div>

                        <script src="https://cdn.ckeditor.com/ckeditor5/37.0.0/classic/ckeditor.js"></script>
                        <script>
                          function initializeCKEditor(selector) {
                            ClassicEditor
                              .create(document.querySelector(selector))
                              .catch(error => {
                                console.error(error);
                              });
                          }

                          function addQuestionAnswer() {
                            var newRow = document.createElement("div");
                            newRow.className = "row questionanswerrow";
                            newRow.innerHTML = `
                                  
                              `;
                            document.querySelector(".qs_list").appendChild(newRow);
                            initializeCKEditor('.question:last-of-type');
                            initializeCKEditor('.answer:last-of-type');
                          }

                          document.querySelector(".add-button").addEventListener("click", function () {
                            addQuestionAnswer();
                          });

                          // Initialize CKEditor for 1wthe existing fields
                          initializeCKEditor('.question');
                          initializeCKEditor('.answer');
                        </script>

                      </div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-xl-12 col-lg-12 px-3">
                    <div class="card mt-1">
                      <div class="card-content">
                        <div class="card-content">
                          <div class="card-body">
                            <div class="row">
                              <div class="col-xl-4 mb-1">
                                <label>Job Description</label>
                                <textarea id="jobDescription" name="jobDescription" class="form-control" col="5"
                                  rows="5"><%= vacancy?.jobDescription ? vacancy?.jobDescription : 'Looking for a hard working and reliable resource for our company.'%></textarea>
                              </div>
                              <div class="col-xl-5">
                                <label for="duties">Job Duties</label>
                                <textarea id="duties" name="duties" class="form-control" cols="3" rows="3"
                                  maxlength="150"><%= vacancy?.duties %></textarea>
                              </div>



                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-xl-12 col-lg-12 px-3">
                    <div class="card mt-1">
                      <div class="card-content">
                        <div class="card-content">
                          <div class="card-body">
                            <div class="row">
                              <div class="col-xl-3 mb-1">
                                <label>Add Video JD</label>
                                <input accept="video/*" onchange="validateVideoFile(this)" class="form-control"
                                  type="file" name="jobVideo" id="jobvideo">
                              </div>
                              <div class="col-xl-3 mb-1">
                                <label>Add Thumbnail JD</label>
                                <input accept="image/*" onchange="validateImageFile(this)" class="form-control"
                                  type="file" name="jobVideoThumbnail" id="jobVideoThumbnail">
                              </div>

                              <div class="col-xl-12 mb-1 text-right">
                                <button id="sub-btn" class="btn btn-success waves-effect waves-light text-white">
                                  SUBMIT
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
          </div>
          </div>
          </section>
          </form>
          </div>

          <div class="modal fade" id="addCoins" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title text-white text-uppercase" id="exampleModalLongTitle">Insufficient Coins</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body pt-1" id="popup-body">
                  <h5 class="pb-1 mb-0 mt-1">
                    You need <%=coinsRequired?.contactcoins %> Coins to avail this Premium Service
                  </h5>
                  <ul class="list-unstyled">
                    <li class="mb-1">
                      <span class="credit font-weight-bold">
                        Current Coins Balance: <%= company.creditLeft %></span>
                    </li>
                  </ul>
                </div>
                <div class="modal-footer">
                  <button class="btn btn-primary" onclick="getOffers()" data-toggle="modal" data-target="#coin_offer"
                    data-dismiss="modal">Buy Coins</button>
                  <button type="button" class="btn btn-outline-light" data-dismiss="modal"><i
                      class="feather icon-x d-block d-lg-none"></i>
                    <span class="d-none d-lg-block">Cancel</span></button>
                </div>
              </div>
            </div>
          </div>

          <!-- Coin modal offer -->
          <div class="modal fade show" id="coin_offer" tabindex="-1" role="dialog"
            aria-labelledby="exampleModalCenterTitle" aria-modal="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title text-white text-uppercase" id="exampleModalLongTitle">COIN OFFERS
                  </h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"></span>
                  </button>
                </div>
                <div class="modal-body pt-1" id="popup-body">
                  <ul class="list-unstyled">
                    <li>
                      <div class="col-xl-8 mx-auto" id="offers">

                      </div>
                    </li>
                    <li class="mb-1">
                      <span class="credit font-weight-bold">
                        Current Coins Balance: <%= company.creditLeft %></span>
                    </li>
                  </ul>
                </div>
                <div class="modal-footer">
                  <button type="submit" class="btn btn-primary waves-effect waves-light" id="pay-button"
                    data-toggle="modal" data-target="#applyvoucher">Pay Now</button>
                  <button type="button" class="btn btn-outline-light waves-effect waves-light" data-dismiss="modal"><i
                      class="feather icon-x d-block d-lg-none"></i>
                    <span class="d-none d-lg-block">Cancel</span></button>
                </div>
              </div>
            </div>
          </div>
          <!-- End Coin modal offer -->
          <!-- Voucher modal -->
          <div class="modal fade show" id="applyvoucher" tabindex="-1" role="dialog"
            aria-labelledby="exampleModalCenterTitle" aria-modal="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content modal-sm">
                <div class="modal-header vchr_header">
                  <h5 class="modal-title text-white text-uppercase" id="exampleModalLongTitle">Buy Coins</h5>
                  <button type="button" class="close color-purple" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true"></span>
                  </button>
                </div>
                <div class="modal-body mode-dice p-0">
                  <form class="my-3">
                    <h3 class="coupon-text">If you have <strong>Coupon Code </strong>, apply here</h3>
                    <input type="text" name="voucherField" class="text-white mt-1" placeholder="Enter Code" id="voucher"
                      oninput="convert(event)" onkeypress="checkVouchers(event)">
                    <button type="button" class="voucher-btn disabled btn btn-sm ml-1" aria-label="Apply" id="add"
                      disabled> <span aria-hidden="true" class="yes-cross" id="applyVoucher"
                        onclick="apply(event)">Apply</span> </button>
                  </form>
                  <input type="hidden" class="form-control" id="offerId" value="" />
                  <input type="hidden" class="form-control" id="amount" value="" />
                  <input type="hidden" class="form-control" id="offerAmount" value="" />
                  <input type="hidden" class="form-control" id="codevalue" value="" />
                  <p class="text-success font-weight-bolder font-italic" id="success-message"></p>
                  <p class="text-danger font-weight-bolder font-italic" id="error-message"></p>
                </div>
                <div class="modal-footer text-center">
                  <button class="btn button-vchr shadow" role="button" onclick="payment(event)" id="apply">Apply /Pay
                    Now</button>
                </div>
              </div>
            </div>
          </div>

          <!-- End Voucher modal-->
          <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
          <script>
            $('.chosen').chosen();
            document.getElementById('sub-qua-field').style.display = "none"
            let selectQua = document.getElementById('jd-qua')
            let value = selectQua.options[selectQua.selectedIndex].text;
            if (value == '10th' || value == '12th' || value == 'Upto 5th') {
              document.getElementById('sub-qua-field').style.display = "block"
              $('#jd-subqua-field').hide();
              document.getElementById('isedited').value = true
            }
            checkQualificationOptions = () => {
              const selectQualification = document.getElementById('jd-qua')
              let value = selectQualification.options[selectQualification.selectedIndex].text;
              const subQualification = document.getElementById('jd-subqua');
              if (value === '12th' || value === '10th' || value === 'Upto 5th') {
                subQualification.removeAttribute('required')
                return false;
              }
              subQualification.setAttribute('required', '')
              return true;
            }
            document.getElementById('pay-button').onclick = function (e) {
              $('#coin_offer').modal('hide');
              let amount = $('input[name="offerName"]:checked').val()
              let offerId = $('input[name="offerName"]:checked').attr('id');
              setValues(offerId, amount)
            }
            function makePayment(e) {
              let voucherCode = document.getElementById('voucher').value
              const offerId = document.getElementById('offerId').value;
              const amount = document.getElementById('amount').value
              let code = document.getElementById('codevalue').value
              let data = {
                offerId: offerId,
                amount: amount
              }
              axios({ method: 'post', url: '<%= process.env.MIPIE_BACKEND_URL %>/company/payment', data, headers: { 'x-auth': localStorage.getItem('token') } }).then((res) => {
                let options = {
                  "key": '<%= process.env.MIPIE_RAZORPAY_KEY %>',
                  "amount": res.data.order.amount,
                  "currency": res.data.order.currency,
                  "name": "MiPie",
                  "description": "",
                  "image": "<%= process.env.MIPIE_BACKEND_URL %>/images/logo/logo.png",
                  "order_id": res.data.order.id,
                  "handler": function (response) {
                    let data = {
                      paymentId: response.razorpay_payment_id,
                      orderId: response.razorpay_order_id,
                      _company: res.data.company._id,
                      _offer: offerId,
                      amount: amount,
                      code: code
                    }
                    axios({ method: 'post', url: '<%= process.env.MIPIE_BACKEND_URL %>/company/paymentStatus', data, headers: { 'x-auth': localStorage.getItem('token') } }).then(res => {
                      window.location.reload()
                    }).catch(
                      (error) => {
                        console.log(error.message)
                      })
                  },
                  "prefill": {
                    "name": res.data.company.name,
                    "email": res.data.company.email,
                    "contact": res.data.company._concernPerson.mobile
                  },
                  "theme": {
                    "color": "#FC2B5A"
                  }
                };
                let rzp1 = new Razorpay(options);
                rzp1.open();
                e.preventDefault();
              }).catch(
                err => console.log(err.message)
              )
            }
            function payment(e) {
              let voucherCode = document.getElementById('voucher').value
              if (voucherCode.trim() == "") {
                makePayment(e);
              } else {
                let code = document.getElementById('voucher').value
                let amount = document.getElementById('offerAmount').value
                let offer = document.getElementById('offerId').value
                let data = {
                  amount,
                  code,
                  offerId: offer
                }
                document.getElementById('codevalue').value = code
                axios({ method: 'put', url: '<%= process.env.MIPIE_BACKEND_URL %>/company/checkvoucher', data, headers: { 'x-auth': localStorage.getItem('token') } })
                  .then((res) => {
                    if (res.data.status && res.data.amount > 0) {
                      $('#error-message').text('')
                      $('#success-message').text(res.data.message);
                      document.getElementById('amount').value = res.data.amount;
                      document.getElementById('apply').innerHTML = `Pay /    ${res.data.amount}`
                      makePayment(e);
                    } else if (res.data.status && res.data.amount == 0) {
                      $('#error-message').text('')
                      $('#success-message').text(res.data.message);
                      document.getElementById('amount').value = res.data.amount;
                      document.getElementById('apply').innerHTML = `Pay /    ${res.data.amount}`
                      window.location.reload();
                    } else {
                      document.getElementById('voucher').value = ''
                      document.getElementById('codevalue').value = ''
                      document.getElementById('amount').value = document.getElementById('offerAmount').value;
                      $('#error-message').text(res.data.message)
                      $('#success-message').text('');
                      let offerAmount = document.getElementById('offerAmount').value
                      document.getElementById('apply').innerHTML = `Pay  ${offerAmount}`
                    }
                  })
              }
            }
            function checkVouchers(e) {
              if (e.key === "Enter") {
                event.preventDefault();
                payment(e)
              }
            }
            function apply(e) {
              let code = document.getElementById('voucher').value
              let amount = document.getElementById('offerAmount').value
              let offer = document.getElementById('offerId').value
              let data = {
                amount,
                code,
                offerId: offer
              }
              document.getElementById('codevalue').value = code
              axios({ method: 'put', url: '<%= process.env.MIPIE_BACKEND_URL %>/company/checkvoucher', data, headers: { 'x-auth': localStorage.getItem('token') } })
                .then((res) => {
                  if (res.data.status && res.data.amount > 0) {
                    $('#error-message').text('')
                    $('#success-message').text(res.data.message);
                    document.getElementById('amount').value = res.data.amount;
                    document.getElementById('apply').innerHTML = `Pay /    ${res.data.amount}`
                  } else if (res.data.status && res.data.amount == 0) {
                    $('#error-message').text('')
                    $('#success-message').text(res.data.message);
                    document.getElementById('amount').value = res.data.amount;
                    document.getElementById('apply').innerHTML = `Pay /    ${res.data.amount}`
                    window.location.reload();
                  } else {
                    document.getElementById('voucher').value = ''
                    document.getElementById('codevalue').value = ''
                    $('#error-message').text(res.data.message);
                    document.getElementById('amount').value = document.getElementById('offerAmount').value;
                    $('#success-message').text('');
                    let offerAmount = document.getElementById('offerAmount').value
                    document.getElementById('apply').innerHTML = `Pay  ${offerAmount}`
                  }
                })
            }

            function getOffers() {
              axios({ method: 'get', url: `<%= process.env.MIPIE_BACKEND_URL %>/company/getCoinOffers`, headers: { 'x-auth': localStorage.getItem('token') } })
                .then(res => {
                  let offers = document.getElementById('offers');
                  let html = ''
                  for (let i of res.data) {
                    html += `<div class="row inner-border my-2 text-white popup-bg py-1"><div class="col-9 pr-0">${i.displayOffer}</div><div class="col-3 text-left"><span>  <input type="radio" id="${i._id}" name="offerName" value="${i.payAmount.$numberDecimal}" class="radio-size"> </span></div></div>`
                  }
                  offers.innerHTML = html
                  $('.radio-size').first().prop("checked", true)
                })
            }
          </script>

          <script
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB7DDN_gUp2zyrlElXtYpjTEQobYiUB9Lg&callback=initMap&libraries=places&v=weekly"
            defer></script>
          <script>
            function initMap() {
              const options = {
                componentRestrictions: { country: "in" },
                types: ["establishment"]
              };

              const location = document.getElementById("work-loc")
              var _addEventListener = (location.addEventListener) ? location.addEventListener : location.attachEvent;
              var arrowEvent = false;
              function addEventListenerWrapper(type, listener) {
                if (type == "keydown") {
                  var orig_listener = listener;
                  listener = function (event) {
                    var suggestion_selected = $("#work-loc-selected").length > 0;
                    if (event.which == 38 || event.which == 40) {
                      arrowEvent = true
                    }
                    else if (event.which == 13 && !suggestion_selected && arrowEvent == false) {
                      var simulated_downarrow = $.Event("keydown", {
                        keyCode: 40,
                        which: 40
                      });
                      orig_listener.apply(location, [simulated_downarrow]);
                    }
                    orig_listener.apply(location, [event]);
                  };
                }
                _addEventListener.apply(location, [type, listener]);
              }
              location.addEventListener = addEventListenerWrapper;
              location.attachEvent = addEventListenerWrapper;
              var autocomplete = new google.maps.places.Autocomplete(location, options);
              google.maps.event.addListener(autocomplete, 'place_changed', function () {
                let place = autocomplete.getPlace();
                document.getElementById('place').value = location.value;
                document.getElementById('latitude').value = place.geometry.location.lat();
                document.getElementById('longitude').value = place.geometry.location.lng();
              });
            }
            window.initMap = initMap;
          </script>
          <script>
            $('#preloader').hide();
            let lessCoins = false
            const stateDropDown = (event, cityId) => {
              const stateId = event.target.value;
              let body = { stateId: stateId };
              const selectCase = document.getElementById(cityId);
              $.get('<%= process.env.MIPIE_BACKEND_URL %>/company/getcitiesbyId', body).done((res) => {
                $(`select#${cityId} option.companycitylist`).remove();
                let options;
                for (let i = 0; i < res.cityValues.length; i++) {
                  options =
                    options +
                    `<option value="${res.cityValues[i]._id}" class="text-capitalize companycitylist">${res.cityValues[i].name}</option>`;
                }
                $(`select#${cityId}`).append(options);
              });
            };
            function salaryCheck() {
              if ($('#fixedCheck').is(":checked")) {
                $('#ifFixed').show();
                $('#ifdefine').hide();
              } else {
                $('#ifdefine').show();
                $('#ifFixed').hide();
              }
            }
            const displayVal = (event, selector) => {
              document.getElementById(`${selector}`).textContent = event.target.value
            }
            $('#add-button').bind('click', () => {
              let html = $('#questionanswerTemplate template').html();
              $('#questionanswerlist').append(html);
            })


            const checkJDVideoValidation = (video) => {
              let regex = /(\.mp4|\.mov|\.avi)$/i;
              if (!regex.exec(video)) {
                return false;
              } else {
                return true;
              }
            }

            // function validateVideoFile(input) {
            //   let file = input.files[0];
            //   if (file) {
            //     if (!checkJDVideoValidation(file.name)) {
            //       alert("Please upload video in mp4, mov, or avi format only!");
            //       input.value = ""; 
            //     }
            //   }
            // }
            function validateVideoFile(input) {
              const file = input.files[0];

              if (file) {
                const fileType = file.name.split('.').pop().toLowerCase();
                const allowedTypes = ['mp4', 'mov', 'avi'];
                const maxSize = 9 * 1024 * 1024; // 9MB in bytes

                if (!allowedTypes.includes(fileType)) {
                  alert(" Invalid file format! Only MP4, MOV, and AVI files are allowed.");
                  input.value = ""; // clear input
                  return false;
                }

                if (file.size > maxSize) {
                  alert(" File size too large! Maximum allowed size is 9MB.");
                  input.value = ""; // clear input
                  return false;
                }

                // Optional: show file size in console
                console.log(" Video file accepted, size: " + (file.size / (1024 * 1024)).toFixed(2) + " MB");
              }

              return true;
            }

            const checkJDThumbnailValidation = (image) => {
              let regex = /(\.jpg|\.jpeg|\.png)$/i;
              if (!regex.exec(image)) {
                return false;
              } else {
                return true;
              }
            }
            function validateImageFile(input) {
              let file = input.files[0];
              if (file) {
                if (!checkJDThumbnailValidation(file.name)) {
                  alert("Please upload image in png, jpg, or jpeg format only!");
                  input.value = ""; // Reset the file input
                }
              }
            }


            function getQuestionAnswers() {
              let questionsAnswersArray = [];
              const elements = document.querySelectorAll('#questionanswerlist .questionanswerrow');
              Array.from(elements).forEach((item) => {
                let queAnsObj = {}
                let formControls = item.querySelectorAll('.form-control');
                if (formControls[0].value.trim() !== "" && formControls[1].value.trim() !== "") {
                  queAnsObj['Question'] = formControls[0].value;
                  queAnsObj['Answer'] = formControls[1].value;
                  questionsAnswersArray.push(queAnsObj);
                }
              })
              return questionsAnswersArray;
            }


            function convert(event) {
              const val = event.target.value;
              event.target.value = val.toUpperCase()

              let applyButton = document.getElementById('add')
              if (event.target.value.trim() !== '') {
                applyButton.disabled = false
                applyButton.classList.remove('disabled')
              }
              else {
                applyButton.disabled = true
                applyButton.classList.add('disabled')
              }
            }
            function setValues(offerId, amount) {
              let offer = document.getElementById('offerId')
              let voucherAmount = document.getElementById('amount')
              let offerAmount = document.getElementById('offerAmount')
              offer.value = offerId;
              voucherAmount.value = amount
              offerAmount.value = amount
              document.getElementById('apply').innerHTML = `Pay  ${amount}`
            }
            $('#sub-btn').click((e) => {
              if (!validations()) {
                event.preventDefault();
                return false
              }
              event.preventDefault();
              // 25coin modal
              const creditLeft = +("<%=company.creditLeft%>");
              const coinsRequired = +("<%=coinsRequired?.contactcoins%>");
              const isContactChecked = document.querySelector('#contact-directly-yes')?.checked || false;

              if (isContactChecked && creditLeft < coinsRequired) {
                e.preventDefault();
                document.getElementById("sub-btn").setAttribute("data-toggle", "modal");
                document.getElementById("sub-btn").setAttribute("data-target", "#addCoins");
                document.getElementById("sub-btn").setAttribute("data-dismiss", "modal");
                lessCoins = true
              } else {
                document.getElementById("sub-btn").removeAttribute("data-toggle");
                document.getElementById("sub-btn").removeAttribute("data-target");
                document.getElementById("sub-btn").removeAttribute("data-dismiss");
                lessCoins = false
              }

              document.getElementById('jobvideo').addEventListener('change', function () {
                let file = this.files[0]; // Get selected file
                if (file) {
                  let fileType = file.name.split('.').pop().toLowerCase();
                  let allowedTypes = ['mp4', 'mov', 'avi'];
                  let maxSize = 9 * 1024 * 1024; // 9MB limit

                  if (!allowedTypes.includes(fileType)) {
                    alert(" Invalid file format! Only MP4, MOV, and AVI files are allowed.");
                    this.value = ''; // Reset input field
                    return;
                  }

                  if (file.size > maxSize) {
                    alert(" File size too large! Maximum allowed size is 9MB.");
                    this.value = ''; // Reset input field
                  }
                }
              });

              document.getElementById('jobVideoThumbnail').addEventListener('change', function () {
                let file = this.files[0]; // Get selected file
                if (file) {
                  let fileType = file.name.split('.').pop().toLowerCase();
                  let allowedTypes = ['jpg', 'jpeg', 'png'];
                  let maxSize = 10 * 1024 * 1024; // 10MB limit

                  if (!allowedTypes.includes(fileType)) {
                    alert(" Invalid file format! Only PNG, JPG, and JPEG files are allowed.");
                    this.value = ''; // Reset input field
                    return;
                  }

                  if (file.size > maxSize) {
                    alert(" File size too large! Maximum allowed size is 10MB.");
                    this.value = ''; // Reset input field
                  }
                }
              });

              let formData = new FormData(document.querySelector("form")); // FormData Object 

              //  Form Fields Append 
              // formData.append("displayCompanyName", document.getElementById('organizationName').value);
              // formData.append("title", document.getElementById('jobTitle').value);
              // formData.append("experience", document.getElementById('jd-exp').value);
              // formData.append("qualification", document.getElementById('jd-qua').value);
              // formData.append("subQualification", document.getElementById('jd-subqua').value);
              // formData.append("validity", document.getElementById('endDate').value);
              // formData.append("state", document.getElementById('state-field').value);
              // formData.append("city", document.getElementById('city').value);
              // formData.append("place", document.getElementById('place').value);
              // formData.append("latitude", document.getElementById('latitude').value);
              // formData.append("longitude", document.getElementById('longitude').value);
              // formData.append("noOfPosition", document.getElementById('noOfVacancies').value);
              // formData.append("remarks", document.getElementById('remarks').value);
              // formData.append("jobDescription", document.getElementById('jobDescription').value);
              // formData.append("duties", document.getElementById('duties').value);

              // //  Radio Buttons & Checkboxes Values
              // formData.append("genderPreference", document.querySelector('[name=genderPreference]:checked').value);
              // formData.append("jobType", document.querySelector('[name=jobType]:checked').value);
              // formData.append("compensation", document.querySelector('[name=compensation]:checked').value);
              // formData.append("pay", document.querySelector('[name=pay]:checked').value);
              // formData.append("work", document.querySelector('[name=work]:checked').value);
              // formData.append("shift", document.querySelector('[name=shift]:checked').value);
              // formData.append("isFixed", document.getElementById('fixedCheck').checked ? "true" : "false");
              // formData.append("isContact", document.getElementById('contact-directly-yes').checked ? "true" : "false");

              // //  Salary Details (Fixed/Range)
              // if (document.getElementById('fixedCheck').checked) {
              //   formData.append("amount", document.getElementById('fixed-range-input').value);
              // } else {
              //   formData.append("min", document.getElementById('min-input').value);
              //   formData.append("max", document.getElementById('max-input').value);
              // }

              //   (File) Append 
              let fileInput = document.getElementById('jobvideo');
              if (fileInput.files.length > 0) {
                formData.append("jobVideo", fileInput.files[0]); // Only the first selected file
              }

              let fileThumbnailInput = document.getElementById('jobVideoThumbnail');
              if (fileThumbnailInput.files.length > 0) {
                formData.append("jobVideoThumbnail", fileThumbnailInput.files[0]); // Only the first selected file
              }

              console.log(formData, 'body>>>>>>>>>>>>>')
              if (!lessCoins) {
                axios.post('<%= process.env.MIPIE_BACKEND_URL %>/company/addjd', formData, {
                  headers: { 'Content-Type': 'multipart/form-data' }
                })
                  .then(response => {
                    console.log(response);
                    if (response.data.status) {
                      window.location.href = "<%= process.env.MIPIE_BACKEND_URL %>/company/list/jobs"; // Success  redirect 
                    }
                  })
                  .catch(error => {
                    console.error("Error submitting the form:", error);
                  });
              }
            })
            function validations() {
              $('#jd-info .error').removeClass('error')
              $('#jd-loc .error').removeClass('error')
              $('#jd-comp .error').removeClass('error')
              $('#jd-shift-info .error').removeClass('error')
              $('#jd-skills .error').removeClass('error')
              $('#jd-phoneNumber').removeClass('error');
              $('#jd-whatsappNumber').removeClass('error');
              $('#jd-name').removeClass('error');
              $('#jd-email').removeClass('error');
              $('#college-ac-info').removeClass('error');
              let title = $('#jobTitle').val();

              $('#jd-subqua-field').removeClass('error')
              let industry = $('#jd-industry').val();
              let exp = $('#jd-exp').val();
              let expMon = $('#jd-exp-mon').val();
              let qua = $('#jd-qua').val();
              let subqua = $('#jd-subqua').val();
              // let jobCategory = $('#jd-category').val();
              let address = $('#candidate-address').val()
              let state = $('#state-field').val()
              let city = $('#city').val()
              let name = document.getElementById('name');
              let whatsappNumber = document.getElementById('whatsappNumber');
              let phoneNumber = document.getElementById('phoneNumber');
              let email = document.getElementById('email')
              let organizationName = $('#organizationName').val()
              let typeRadio1 = document.getElementById('inlineRadio1');
              let typeRadio2 = document.getElementById('inlineRadio2')
              let compRadio1 = document.getElementById('inlineRadio3');
              let compRadio2 = document.getElementById('inlineRadio4');
              let compRadio3 = document.getElementById('inlineRadio5');
              let payRadio1 = document.getElementById('inlineRadio6');
              let payRadio2 = document.getElementById('inlineRadio7')
              let workRadio1 = document.getElementById('inlineRadio11');
              let shiftRadio1 = document.getElementById('inlineRadio8');
              let shiftRadio2 = document.getElementById('inlineRadio9');
              let shiftRadio4 = document.getElementById('inlineRadio10');
              let shiftRadio3 = document.getElementById('rotational');
              let workRadio2 = document.getElementById('inlineRadio12');
              let workRadio3 = document.getElementById('inlineRadio13');
              let wfh = document.getElementById('wfh');
              let genderRadio1 = document.getElementById('genderRadio1');
              let minAge = document.getElementById('min-age');
              let maxAge = document.getElementById('max-age');
              let genderRadio2 = document.getElementById('genderRadio2');
              let genderRadio3 = document.getElementById('genderRadio3');
              const currentLocation = document.getElementById('work-loc');
              const latitude = $('#latitude').val()
              const longitude = $('#longitude').val()
              const place = $('#place').val()
              let currentLoc = currentLocation.value;
              const jobValidity = $('#endDate').val()
              let minSalary = document.getElementById('min-input').value
              let maxSalary = document.getElementById('max-input').value
              let fixedSalary = document.getElementById('fixed-range-input').value
              let shiftTimingFrom = document.getElementById('timing-from').value
              let shiftTimingTo = document.getElementById('timing-to').value
              let firstError = ''
              let flag = true
              if (title.trim() === '') {
                $('#jd-title').addClass('error')
                firstError = firstError ? firstError : $('#jobTitle')
                flag = false
              } if (currentLoc.trim() === "") {
                $('#loc-field').addClass('error')
                firstError = firstError ? firstError : $('#work-loc')
                flag = false;
              } if (industry.trim() === '') {
                $('#jd-industry-field').addClass('error')
                firstError = firstError ? firstError : $('#jd-industry')
                flag = false
              }
              if (exp.trim() === '' || expMon.trim()==='') {
                $('#jd-exp-field').addClass('error')
                $('#jd-exp-field-month').addClass('error')
                firstError = firstError ? firstError : $('#jd-exp')
                flag = false
              }
              if (qua.trim() === '') {
                $('#jd-qua-field').addClass('error')
                firstError = firstError ? firstError : $('#jd-qua')
                flag = false
              }
              if (subqua.length <= 0 && checkQualificationOptions() === true) {
                $('#jd-subqua-field').addClass('error')
                firstError = firstError ? firstError : $('#jd-subqua-field .chosen-container-multi .chosen-choices input')
                flag = false
              }
              if (jobValidity.trim() === '') {
                $('#jd-validity-field').addClass('error')
                firstError = firstError ? firstError : $('#endDate')
                flag = false
              }
              // if (jobCategory.trim() === '') {
              //   $('#jd-category-field').addClass('error')
              //   firstError = firstError ? firstError : $('#jd-category-field')
              //   flag = false
              // }
              if (state.trim() === '') {
                $('#jd-state').addClass('error')
                firstError = firstError ? firstError : $('#state-field')
                flag = false
              }
              if (city.trim() === '') {
                $('#jd-city').addClass('error')
                firstError = firstError ? firstError : $('#city')
                flag = false
              }
              if (minAge.value > maxAge.value && minAge.value && maxAge.value) {
                $('#age-group').addClass('error');
                firstError = firstError ? firstError : minAge;
                flag = false;
              }
              if (!typeRadio1.checked && !typeRadio2.checked) {
                $('#job-type-field').addClass('error')
                firstError = firstError ? firstError : typeRadio1
                flag = false
              }
              if (shiftTimingFrom.trim() === '') {
                $('#shift-field').addClass('error')
                firstError = firstError ? firstError : $('#timing-from')
                flag = false
              }
              if (shiftTimingTo.trim() === '') {
                $('#shift-field').addClass('error')
                firstError = firstError ? firstError : $('#timing-to')
                flag = false
              }
              if (!shiftRadio1.checked && !shiftRadio2.checked && !shiftRadio3.checked && !shiftRadio4.checked) {
                $('#shift-field').addClass('error')
                firstError = firstError ? firstError : typeRadio1
                flag = false
              }
              if (!compRadio1.checked && !compRadio2.checked && !compRadio3.checked) {
                $('#jp-comp-field').addClass('error')
                firstError = firstError ? firstError : compRadio1
                flag = false
              } if (!payRadio1.checked && !payRadio2.checked) {
                $('#jd-pay-field').addClass('error')
                firstError = firstError ? firstError : payRadio1
                flag = false
              }
              if (!workRadio1.checked && !workRadio2.checked && !workRadio3.checked && !wfh.checked) {
                $('#jd-work-field').addClass('error')
                firstError = firstError ? firstError : workRadio1
                flag = false
              } if (!document.getElementById('fixedCheck').checked && !document.getElementById('defineCheck').checked) {
                $('#salaryRange-field').addClass('error')
                firstError = firstError ? firstError : document.getElementById('fixedCheck')
                flag = false
              } if (document.getElementById('fixedCheck').checked && !fixedSalary) {
                $('#ifFixed').addClass('error')
                firstError = firstError ? firstError : document.getElementById('fixedCheck')
                flag = false
              } if (document.getElementById('defineCheck').checked && !minSalary && !maxSalary) {
                $('#ifdefine').addClass('error')
                firstError = firstError ? firstError : document.getElementById('min-input')
                flag = false
              } if (document.getElementById('defineCheck').checked && !minSalary && maxSalary) {
                $('#min-input').addClass('error')
                firstError = firstError ? firstError : document.getElementById('min-input')
                flag = false
              } if (document.getElementById('defineCheck').checked && minSalary && !maxSalary) {
                $('#max-input').addClass('error')
                firstError = firstError ? firstError : document.getElementById('max-input')
                flag = false
              }
              if (organizationName.trim() === '') {
                $('#jd-organizationName').addClass('error')
                firstError = firstError ? firstError : $('#organizationName')
                flag = false
              }
              if (!genderRadio1.checked && !genderRadio2.checked && !genderRadio3.checked) {
                $('#gender-preference').addClass('error')
                firstError = firstError ? firstError : $('#genderRadio1')
                flag = false
              }
              if (latitude.trim() == "") {
                $('#loc-field').addClass('error')
                firstError = firstError ? firstError : $('#work-loc')
                flag = false;
              }
              if (longitude.trim() == "") {
                $('#loc-field').addClass('error')
                firstError = firstError ? firstError : $('#work-loc')
                flag = false;
              }
              if (place.trim() == "") {
                $('#loc-field').addClass('error')
                firstError = firstError ? firstError : $('#work-loc')
                flag = false;
              }

              if (document.querySelector('#contact-directly-yes').checked) {
                if (phoneNumber.value.trim() === '' || phoneNumber.value.trim().length !== 10) {
                  $('#jd-phoneNumber').addClass('error');
                  firstError = firstError ? firstError : $('#phoneNumber');
                  flag = false;
                }
              }
              
              // Validate College Account Numbers if job is Private
              const isJobPrivate = document.querySelector('input[name="isPublic"]:checked')?.value === 'false';
              if (isJobPrivate) {
                const collegeAcInputs = document.querySelectorAll('.college-ac-input');
                let hasValidInput = false;
                collegeAcInputs.forEach(input => {
                  if (input.value.trim() !== '') {
                    hasValidInput = true;
                  }
                });
                if (!hasValidInput || collegeAcInputs.length === 0) {
                  $('#college-ac-info').addClass('error');
                  firstError = firstError ? firstError : (collegeAcInputs[0] || document.querySelector('.college-ac-input'));
                  flag = false;
                }
              }
              if (firstError) {
                firstError.focus();
              }
              return flag
            }

            function removeVideo() {
              header = { headers: { 'x-auth': localStorage.getItem('token'), "Content-Type": "multipart/form-data" } }
              let data = {
                key: $('#jobvideo').val(),
              }
              axios.post('<%= process.env.MIPIE_BACKEND_URL %>/api/deleteSingleFile', data, header)
                .then(res => {
                  $('.uploadedvideo').hide()
                  $('#jobvideo').val('')
                }).catch(err => console.log(err.message))
            }

            function showContactInfo() {
              document.getElementById("contact-info").style.display = "block";
              var coinLabel = document.querySelector('label[for="25 coin"]');
              coinLabel.style.display = "block";
            }
            function hideContactInfo() {
              document.getElementById("contact-info").style.display = "none";
              var coinLabel = document.querySelector('label[for="25 coin"]');
              coinLabel.style.display = "none";
            }
            let collegeAcNoIndex = 0;
            function addCollegeAcNo() {
              const container = document.getElementById('college-ac-list');
              const index = collegeAcNoIndex++;
              const div = document.createElement('div');
              div.className = 'col-12 col-md-6 col-lg-4 mb-2 college-ac-item';
              div.id = 'college-ac-item-' + index;
              div.innerHTML = '<div class="input-group">' +
                '<input type="text" class="form-control college-ac-input" id="collegeAcNo-' + index + '" name="collegeAcNo[]" placeholder="Enter College Account Number" required oninvalid="this.setCustomValidity(\'Please enter College Account Number\')" oninput="this.setCustomValidity(\'\')">' +
                '<div class="input-group-append">' +
                '<button type="button" class="btn btn-sm btn-danger" onclick="removeCollegeAcNo(' + index + ')">' +
                '<i class="feather icon-trash-2"></i> <span class="d-none d-md-inline">Remove</span>' +
                '</button>' +
                '</div>' +
                '</div>';
              container.appendChild(div);
            }
            
            function removeCollegeAcNo(index) {
              var item = document.getElementById('college-ac-item-' + index);
              if (item) {
                item.remove();
                // Ensure at least one input remains
                var container = document.getElementById('college-ac-list');
                if (container.children.length === 0) {
                  addCollegeAcNo();
                }
              }
            }
            
            // Initialize college account numbers from existing data (for edit mode)
            function initializeCollegeAcNos() {
              <% 
              var collegeAcNosArray = [];
              if (vacancy && vacancy.collegeAcNo) {
                if (Array.isArray(vacancy.collegeAcNo)) {
                  collegeAcNosArray = vacancy.collegeAcNo;
                } else if (typeof vacancy.collegeAcNo === 'string' && vacancy.collegeAcNo.trim() !== '') {
                  collegeAcNosArray = [vacancy.collegeAcNo];
                }
              }
              if (collegeAcNosArray.length > 0) { %>
                var collegeAcNos = <%- JSON.stringify(collegeAcNosArray) %>;
                for (var idx = 0; idx < collegeAcNos.length; idx++) {
                  var acNo = collegeAcNos[idx];
                  var container = document.getElementById('college-ac-list');
                  var index = collegeAcNoIndex++;
                  var div = document.createElement('div');
                  div.className = 'col-12 col-md-6 col-lg-4 mb-2 college-ac-item';
                  div.id = 'college-ac-item-' + index;
                  var inputHtml = '<div class="input-group"><input type="text" class="form-control college-ac-input" id="collegeAcNo-' + index + '" name="collegeAcNo[]" value="' + acNo + '" placeholder="Enter College Account Number" required oninvalid="this.setCustomValidity(\'Please enter College Account Number\')" oninput="this.setCustomValidity(\'\')"><div class="input-group-append"><button type="button" class="btn btn-sm btn-danger" onclick="removeCollegeAcNo(' + index + ')"><i class="feather icon-trash-2"></i> <span class="d-none d-md-inline">Remove</span></button></div></div>';
                  div.innerHTML = inputHtml;
                  container.appendChild(div);
                }
              <% } %>
            }
            
            function showCollegeAcInfo() {
              document.getElementById("college-ac-info").style.display = "block";
              // Initialize with one input if empty
              if (document.getElementById('college-ac-list').children.length === 0) {
                addCollegeAcNo();
              }
            }
            function hideCollegeAcInfo() {
              document.getElementById("college-ac-info").style.display = "none";
            }
            
            $(document).ready(function () {
              // Handle job public/private toggle - only affects college-ac-info
              $('input[name="isPublic"]').change(function() {
                const isPublicValue = $(this).val();
                if (isPublicValue === 'false') {
                  // No = Private job, show college ac info
                  showCollegeAcInfo();
                } else {
                  // Yes = Public job, hide college ac info
                  hideCollegeAcInfo();
                }
              });
              
              // Initialize college-ac-info visibility on page load
              if ($('#job-public-no').prop('checked')) {
                showCollegeAcInfo();
                initializeCollegeAcNos();
              } else {
                hideCollegeAcInfo();
              }
              
              // Initialize contact-info visibility (independent of isPublic)
              if ($('#contact-directly-yes').prop('checked')) {
                showContactInfo();
              }
            });


            // Initialize isContactvalue - check radio button state directly for accuracy
            let isContactvalue = document.querySelector('#contact-directly-yes')?.checked || false;
            $('input[name="isContact"]').click(function () {
              isContactvalue = $('input[name="isContact"]:checked').val() === 'true';
            });
            const selectQualification = document.getElementById('jd-qua')
            $('#jd-qua').change((event) => {
              const value = selectQualification.options[selectQualification.selectedIndex].text;
              if (value == '12th' || value == '10th' || value == 'Upto 5th') {
                document.getElementById('isedited').value = true
                document.getElementById('sub-qua-field').style.display = "block"
                $('#jd-subqua-field').hide();
              } else {
                document.getElementById('sub-qua-field').style.display = "none"
                document.getElementById('isedited').value = false
                $('#jd-subqua-field').show();
              }
            })



          </script>
          <script>
            flatpickr("#timing-from", {
              enableTime: true,
              noCalendar: true,               //  Hide the calendar
              dateFormat: "h:i K",            //  Only time format (e.g., 02:30 PM)
              time_24hr: false                //  12-hour format with AM/PM
            });

            flatpickr("#timing-to", {
              enableTime: true,
              noCalendar: true,
              dateFormat: "h:i K",
              time_24hr: false
            });
          </script>

          <% include ./partials/footer %>
  </body>

  </html>